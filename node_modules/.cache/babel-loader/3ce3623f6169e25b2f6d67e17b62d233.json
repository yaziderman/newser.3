{"ast":null,"code":"import _classCallCheck from\"C:/Users/yazid/newser/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/yazid/newser/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/yazid/newser/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/yazid/newser/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import config from\"../extra/config\";import ApiHelper from\"../extra/ApiHelper\";import NewsCard from\"./NewsCard\";import SearchBox from\"../Ui/SearchBox\";import makeExpanding from\"../Ui/expanding-animation\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var ExpandingSearchBox=makeExpanding(SearchBox);var titleize=require(\"titleize\");var scrollerStyle={backgroundColor:\"#003768bd\"};var News=/*#__PURE__*/function(_Component){_inherits(News,_Component);var _super=_createSuper(News);function News(){var _this;_classCallCheck(this,News);_this=_super.call(this);_this.handleOnSearch=function(e){var searchStr=e.target.value;var searchResults=_this.state.news;if(searchStr.trim()!=\"\"){searchResults=_this.state.news.filter(function(item){return item.title.toLowerCase().includes(searchStr);});}_this.setState({searchNews:searchResults});};_this.state={category:\"\",news:null,searchNews:null};return _this;}_createClass(News,[{key:\"componentDidMount\",value:function componentDidMount(){var slug=this.props.match.params.slug;this.setState({category:slug},function(){var cashedNews=localStorage.getItem(\"FULLNEWS-\"+slug);if(cashedNews!==null){var newsList=JSON.parse(cashedNews);this.setState({news:newsList,searchNews:newsList});}else{this.fetchAllNewsByCategory(slug);}});}},{key:\"fetchAllNewsByCategory\",value:function fetchAllNewsByCategory(category){var _this2=this;var criteria={category:category};ApiHelper.fetchNews(config.headlinesEndpoint,criteria,function(response){_this2.setState({news:response.data.articles,searchNews:response.data.articles});localStorage.setItem(\"FULLNEWS-\"+category,JSON.stringify(response.data.articles));});}},{key:\"render\",value:function render(){var news=this.state.news;var searchNews=this.state.searchNews;var style={float:\"right\"};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"section\",{className:\"hero is-small\",children:/*#__PURE__*/_jsx(\"div\",{className:\"hero-body p-t-none\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"title\",children:[titleize(this.state.category),\" News\"]}),/*#__PURE__*/_jsxs(\"h2\",{className:\"subtitle\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"newserAction\",children:\"\\xABCategories\"}),/*#__PURE__*/_jsx(\"div\",{style:style,children:/*#__PURE__*/_jsx(ExpandingSearchBox,{handleOnSearch:this.handleOnSearch})})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"columns is-mobile- is-multiline is-centered\",children:!news?/*#__PURE__*/_jsx(React.Fragment,{children:[1,2,3,4].map(function(mock,index){return/*#__PURE__*/_jsx(\"div\",{className:\"column is-half\",children:/*#__PURE__*/_jsx(NewsCard,{})},index);})}):news.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"skeleton\",children:\"No News Found\"}):searchNews.map(function(newsItem,index){return/*#__PURE__*/_jsx(\"div\",{className:\"column is-half\",children:/*#__PURE__*/_jsx(NewsCard,{newsItem:newsItem})},index);})})]});}}]);return News;}(Component);export default News;","map":{"version":3,"sources":["C:/Users/yazid/newser/src/Components/News.js"],"names":["React","Component","config","ApiHelper","NewsCard","SearchBox","makeExpanding","ExpandingSearchBox","titleize","require","scrollerStyle","backgroundColor","News","handleOnSearch","e","searchStr","target","value","searchResults","state","news","trim","filter","item","title","toLowerCase","includes","setState","searchNews","category","slug","props","match","params","cashedNews","localStorage","getItem","newsList","JSON","parse","fetchAllNewsByCategory","criteria","fetchNews","headlinesEndpoint","response","data","articles","setItem","stringify","style","float","map","mock","index","length","newsItem"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport config from \"../extra/config\";\r\nimport ApiHelper from \"../extra/ApiHelper\";\r\nimport NewsCard from \"./NewsCard\";\r\nimport SearchBox from \"../Ui/SearchBox\";\r\nimport makeExpanding from \"../Ui/expanding-animation\";\r\n\r\nconst ExpandingSearchBox = makeExpanding(SearchBox);\r\n\r\nconst titleize = require(\"titleize\");\r\n\r\nconst scrollerStyle = {\r\n  backgroundColor: \"#003768bd\"\r\n};\r\n\r\nclass News extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      category: \"\",\r\n      news: null,\r\n      searchNews: null\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    //injectTapEventPlugin();\r\n  }\r\n\r\n  fetchAllNewsByCategory(category) {\r\n    let criteria = { category: category };\r\n    ApiHelper.fetchNews(config.headlinesEndpoint, criteria, response => {\r\n      this.setState({\r\n        news: response.data.articles,\r\n        searchNews: response.data.articles\r\n      });\r\n      localStorage.setItem(\r\n        \"FULLNEWS-\" + category,\r\n        JSON.stringify(response.data.articles)\r\n      );\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { slug } = this.props.match.params;\r\n    this.setState({ category: slug }, function() {\r\n      let cashedNews = localStorage.getItem(\"FULLNEWS-\" + slug);\r\n      if (cashedNews !== null) {\r\n        let newsList = JSON.parse(cashedNews);\r\n        this.setState({ news: newsList, searchNews: newsList });\r\n      } else {\r\n        this.fetchAllNewsByCategory(slug);\r\n      }\r\n    });\r\n  }\r\n\r\n  handleOnSearch = e => {\r\n    let searchStr = e.target.value;\r\n    let searchResults = this.state.news;\r\n    if (searchStr.trim() != \"\") {\r\n      searchResults = this.state.news.filter(item =>\r\n        item.title.toLowerCase().includes(searchStr)\r\n      );\r\n    }\r\n    this.setState({ searchNews: searchResults });\r\n  };\r\n\r\n  render() {\r\n    let news = this.state.news;\r\n    let searchNews = this.state.searchNews;\r\n    const style = {\r\n      float: \"right\"\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        <section className=\"hero is-small\">\r\n          <div className=\"hero-body p-t-none\">\r\n            <div className=\"container\">\r\n              <h1 className=\"title\">{titleize(this.state.category)} News</h1>\r\n              <h2 className=\"subtitle\">\r\n                <a href=\"/\" className=\"newserAction\">\r\n                  &#171;Categories\r\n                </a>\r\n                  <div style={style}>\r\n                    <ExpandingSearchBox handleOnSearch={this.handleOnSearch} />\r\n                  </div>\r\n              </h2>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <div className=\"columns is-mobile- is-multiline is-centered\">\r\n          {!news ? (\r\n            <React.Fragment>\r\n              {[1, 2, 3, 4].map((mock, index) => (\r\n                <div className=\"column is-half\" key={index}>\r\n                  <NewsCard />\r\n                </div>\r\n              ))}\r\n            </React.Fragment>\r\n          ) : news.length === 0 ? (\r\n            <div className=\"skeleton\">No News Found</div>\r\n          ) : (\r\n            searchNews.map((newsItem, index) => (\r\n              <div className=\"column is-half\" key={index}>\r\n                <NewsCard newsItem={newsItem} />\r\n              </div>\r\n            ))\r\n          )}\r\n          {/* <ScrollUpButton style={scrollerStyle} */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default News;\r\n"]},"metadata":{},"sourceType":"module"}